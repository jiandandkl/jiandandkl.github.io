<!DOCTYPE html>
<html lang="zh">
    <head><meta name="generator" content="Hexo 3.9.0">
    <!--
        © Material Theme
        https://github.com/viosey/hexo-theme-material
        Version: 1.3.3 -->

    <!-- Title -->
    
    <title>
        
            《图解HTTP》读书笔记 | 
        
        dujun blog
    </title>

    <!-- Meta & Info -->
    <meta charset="utf-8">

    <!-- dns prefetch -->
    <meta http-equiv="x-dns-prefetch-control" content="on">
    
    
    
    
    
    

    <meta http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#0097A7">
    <meta name="author" content="jiandandkl">
    <meta name="description" content>
    <meta name="keywords" content=",http">

    <!-- Favicons -->
    <link rel="icon shortcut" type="image/ico" href="/img/favicon.ico">
    <link rel="icon" sizes="192x192" href="/img/favicon.ico">
    <link rel="apple-touch-icon" href="/img/favicon.ico">

    <!--iOS -->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-title" content="Title">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="480">

    <!-- Add to homescreen for Chrome on Android -->
    <meta name="mobile-web-app-capable" content="yes">

    <!-- Add to homescreen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="dujun blog">

    <!-- The Open Graph protocol -->
    <meta property="og:url" content="https://jiandandkl.github.io">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="《图解HTTP》读书笔记 | dujun blog">
    <meta property="og:description" content>
    <meta property="og:article:tag" content="http"> 

    <!--[if lte IE 9]>
        <link rel="stylesheet" href="/css/ie-blocker.css">

        
            <script src="/js/ie-blocker.zhCN.js"></script>
        
    <![endif]-->

    <!-- Import CSS & jQuery -->
    
        <link rel="stylesheet" href="/css/material.min.css">
        <link rel="stylesheet" href="/css/style.min.css">
        <!-- Config CSS -->


<!-- Other Styles -->
<style>
  body, html {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", SimSun, sans-serif;;
  }

  a {
    color: #00838F;
  }

  .mdl-card__media,
  #search-label,
  #search-form-label:after,
  #scheme-Paradox .hot_tags-count,
  #scheme-Paradox .sidebar_archives-count,
  #scheme-Paradox .sidebar-colored .sidebar-header,
  #scheme-Paradox .sidebar-colored .sidebar-badge{
    background-color: #0097A7 !important;
  }

  /* Sidebar User Drop Down Menu Text Color */
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:hover,
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:focus {
    color: #0097A7 !important;
  }

  #post_entry-right-info,
  .sidebar-colored .sidebar-nav li:hover > a,
  .sidebar-colored .sidebar-nav li:hover > a i,
  .sidebar-colored .sidebar-nav li > a:hover,
  .sidebar-colored .sidebar-nav li > a:hover i,
  .sidebar-colored .sidebar-nav li > a:focus i,
  .sidebar-colored .sidebar-nav > .open > a,
  .sidebar-colored .sidebar-nav > .open > a:hover,
  .sidebar-colored .sidebar-nav > .open > a:focus,
  #ds-reset #ds-ctx .ds-ctx-entry .ds-ctx-head a {
    color: #0097A7 !important;
  }

  .toTop {
    background: #757575 !important;
  }

  .material-layout .material-post>.material-nav,
  .material-layout .material-index>.material-nav,
  .material-nav a {
    color: #757575;
  }

  #scheme-Paradox .MD-burger-layer {
    background-color: #757575;
  }

  #scheme-Paradox #post-toc-trigger-btn {
    color: #757575;
  }

  .post-toc a:hover {
    color: #00838F;
    text-decoration: underline;
  }

  #post-content pre {
    background: #272822;
  }

</style>


<!-- Theme Background Related-->

    <style>
      body{
        background-color: #F5F5F5;
      }

      /* blog_info bottom background */
      #scheme-Paradox .material-layout .something-else .mdl-card__supporting-text{
        background-color: #fff;
      }
    </style>




<!-- Fade Effect -->


        <script src="/js/jquery.min.js"></script>
        <script src="/js/queue.js"></script>
    

    <!-- UC Browser Compatible -->
    <script>
        var agent = navigator.userAgent.toLowerCase();
        if(agent.indexOf('ucbrowser')>0) {
            document.write("<link rel=\"stylesheet\" href=\"/css/uc.css\">");
            alert('由于 UC 浏览器使用极旧的内核，而本网站使用了一些新的特性。\n为了您能更好的浏览，推荐使用 Chrome 或 Firefox 浏览器。');
        }
    </script>

    

    


    <!-- Bing Background -->
    

    <!-- Custom Head -->
    
<link rel="stylesheet" href="/css/prism-okaidia.css" type="text/css"></head>


    
        <body id="scheme-Paradox" class="lazy">
            <div class="material-layout  mdl-js-layout has-drawer is-upgraded">
                

                <!-- Main Container -->
                <main class="material-layout__content" id="main">

                    <!-- Top Anchor -->
                    <div id="top"></div>

                    
                        <!-- Hamburger Button -->
                        <button class="MD-burger-icon sidebar-toggle">
                            <span class="MD-burger-layer"></span>
                        </button>
                    

                    <!-- Post TOC -->

    
    <!-- Back Button -->
    <!--
    <div class="material-back" id="backhome-div" tabindex="0">
        <a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon"
           href="#" onclick="window.history.back();return false;"
           target="_self"
           role="button"
           data-upgraded=",MaterialButton,MaterialRipple">
            <i class="material-icons" role="presentation">arrow_back</i>
            <span class="mdl-button__ripple-container">
                <span class="mdl-ripple"></span>
            </span>
        </a>
    </div>
    -->

    <!-- Left aligned menu below button -->
    <button id="post-toc-trigger-btn"
        class="mdl-button mdl-js-button mdl-button--icon">
        <i class="material-icons">format_list_numbered</i>
    </button>

    <ul class="post-toc-wrap mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect" for="post-toc-trigger-btn" style="max-height:80vh; overflow-y:scroll;">
        <ol class="post-toc"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#一、TCP-IP协议"><span class="post-toc-number">1.</span> <span class="post-toc-text">一、TCP/IP协议</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#通信过程"><span class="post-toc-number">1.0.1.</span> <span class="post-toc-text">通信过程</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#IP-TCP-DNS"><span class="post-toc-number">1.0.2.</span> <span class="post-toc-text">IP / TCP / DNS</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#二、HTTP协议"><span class="post-toc-number">2.</span> <span class="post-toc-text">二、HTTP协议</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#HTTP支持的方法"><span class="post-toc-number">2.0.1.</span> <span class="post-toc-text">HTTP支持的方法</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#持久连接"><span class="post-toc-number">2.0.2.</span> <span class="post-toc-text">持久连接</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#管线化"><span class="post-toc-number">2.0.3.</span> <span class="post-toc-text">管线化</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#三、HTTP报文内的HTTP信息"><span class="post-toc-number">3.</span> <span class="post-toc-text">三、HTTP报文内的HTTP信息</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#报文主体与实体主体"><span class="post-toc-number">3.0.1.</span> <span class="post-toc-text">报文主体与实体主体</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#获取部分内容的范围请求"><span class="post-toc-number">3.0.2.</span> <span class="post-toc-text">获取部分内容的范围请求</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#四、HTTP状态码"><span class="post-toc-number">4.</span> <span class="post-toc-text">四、HTTP状态码</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#常见状态码"><span class="post-toc-number">4.0.1.</span> <span class="post-toc-text">常见状态码</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#五、与HTTP协作的web服务器"><span class="post-toc-number">5.</span> <span class="post-toc-text">五、与HTTP协作的web服务器</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#通信数据转发程序-代理、网关、隧道"><span class="post-toc-number">5.0.1.</span> <span class="post-toc-text">通信数据转发程序:代理、网关、隧道</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#六、HTTP首部"><span class="post-toc-number">6.</span> <span class="post-toc-text">六、HTTP首部</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#HTTP请求报文"><span class="post-toc-number">6.0.1.</span> <span class="post-toc-text">HTTP请求报文</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#HTTP响应报文"><span class="post-toc-number">6.0.2.</span> <span class="post-toc-text">HTTP响应报文</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#HTTP首部字段"><span class="post-toc-number">6.0.3.</span> <span class="post-toc-text">HTTP首部字段</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#HTTP-1-1-通用首部字段"><span class="post-toc-number">6.0.4.</span> <span class="post-toc-text">HTTP/1.1 通用首部字段</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#请求首部字段"><span class="post-toc-number">6.0.5.</span> <span class="post-toc-text">请求首部字段</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#响应首部字段"><span class="post-toc-number">6.0.6.</span> <span class="post-toc-text">响应首部字段</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#实体首部字段"><span class="post-toc-number">6.0.7.</span> <span class="post-toc-text">实体首部字段</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#其他首部字段"><span class="post-toc-number">6.0.8.</span> <span class="post-toc-text">其他首部字段</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#七、确保Web安全的HTTPS"><span class="post-toc-number">7.</span> <span class="post-toc-text">七、确保Web安全的HTTPS</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#HTTPS的安全通信机制"><span class="post-toc-number">7.0.1.</span> <span class="post-toc-text">HTTPS的安全通信机制</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#八、确认访问用户身份的认证"><span class="post-toc-number">8.</span> <span class="post-toc-text">八、确认访问用户身份的认证</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#九、基于HTTP的功能追加协议"><span class="post-toc-number">9.</span> <span class="post-toc-text">九、基于HTTP的功能追加协议</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#全双工通信的WebSocket"><span class="post-toc-number">9.0.1.</span> <span class="post-toc-text">全双工通信的WebSocket</span></a></li></ol></li></ol></li></ol>

        <!--
        <li class="mdl-menu__item">
            Some Action
        </li>
        -->
    </ul>




<!-- Layouts -->

    <!-- Post Module -->
    <div class="material-post_container">

        <div class="material-post mdl-grid">
            <div class="mdl-card mdl-shadow--4dp mdl-cell mdl-cell--12-col">

                <!-- Post Header(Thumbnail & Title) -->
                
  <!-- Paradox Post Header -->
  
    
      <!-- Random Thumbnail -->
      <div class="post_thumbnail-random mdl-card__media mdl-color-text--grey-50" data-original="">
        <script>
  var randomNum = Math.floor(Math.random() * 19 + 1);

  if (!$('.post_thumbnail-random').attr('data-original')) {
    $('.post_thumbnail-random').attr('data-original', '/img/random/material-' + randomNum + '.png');
  }
  $('.post_thumbnail-random').addClass('lazy');
</script>

      
      
        <p class="article-headline-p">
          《图解HTTP》读书笔记
        </p>
      </div>
    

    


                
                    <!-- Paradox Post Info -->
                    <div class="mdl-color-text--grey-700 mdl-card__supporting-text meta">

  <!-- Author Avatar -->
  <div id="author-avatar">
    <img src="https://avatars2.githubusercontent.com/u/16009933?v=4" width="44px" height="44px" alt="Author Avatar" />
  </div>
  <!-- Author Name & Date -->
  <div>
    <strong>
      <a href="https://github.com/jiandandkl">
        jiandandkl</a>
    </strong>
    <span>
      9月 30, 2018</span>
  </div>
  <div class="section-spacer"></div>

  <!-- Favorite -->
  <!--
        <button id="article-functions-like-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon btn-like">
            <i class="material-icons" role="presentation">favorite</i>
            <span class="visuallyhidden">favorites</span>
        </button>
    -->
  <span id="busuanzi_container_page_pv" style="margin-right: 10%">
    本文总阅读量<span id="busuanzi_value_page_pv"></span>次
  </span>
  <!-- Qrcode -->
  
  <button id="article-functions-qrcode-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">devices other</i>
    <span class="visuallyhidden">devices other</span>
  </button>
  <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-qrcode-button">
    <li class="mdl-menu__item">
      在其它设备中阅读本文章
    </li>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPYAAAD2CAAAAADAeSUUAAACy0lEQVR42u3aUW4bMQwEUN//0s4B2o1nqG2ylZ6+Athe68lACA71eh+5XtjY2NjY2NjY2NiPZL/i9ZcHle/Mv/HPT63vGRsbG3tv9od//QFm9oQrzNVhrewZGxsb+wR2Ukg+FIn4IFpMux9sbGxs7Pxrku3+ZGODjY2NjZ2zZ1ufNRsPKmDY2NjYD2bnbcB6xJ/HVbOGBxsbG/s09ozxu3//6HwbGxsb+8HsdiVtyazByIe+w51jY2Njb8rOC0O+ufwgklgqj64+PBkbGxv7AHYb2awcytX3tuDis9jY2NgHsFeCpPVhQF6KZj8GNjY29t7sthisBEzthZ72CmY96MXGxsbegp0XhvbVBNyGU+1FTGxsbOxz2HmBubeBmbUx7c+AjY2NfQ57ZUPt5pK/Z1ct6/EANjY29nbs9krlLNzP25JiDLBSwLCxsbG3YM8i+9kVnDxyasHY2NjY57DzYGhl1JpfrMyjq7x0YWNjY+/NXh8GtK+uHNysBGJjY2Pvzb534JpvNL/u017ZudwnNjY29tbsuwrVemFrL3oW0RU2Njb2puz2Ekx7QeffPTl/FRsbG/sE9mwTbWzUNjazoyzGA9jY2NhbsPNRQT6abS90zmB1IIWNjY29KXv26PYyTR3lL4x7sbGxsbHf8WrblfxootYiHipgY2Njn8DOG4NZgZmVwORovi+92NjY2Cez87hn5SCiwlP+MPVUBBsbG3sjdt4M5DHQ7Jmv5YWNjY19DrtddzUeebjfhlCXe8DGxsbelD0rCXn5mQ1oZ63O0lQEGxsb+z9nt0VrvbXIwbPyVowHsLGxsTdit9F/clj5sa5HSB8OFBsbGxt79J58HJt/ahhsYWNjY2Mv8NqIv42lomPFxsbGPoDdxvftF+dlKQ+MirgKGxsbe2v2XcHNXS1EO3KO3omNjY29KfuchY2NjY2NjY2Njf2Y9QUriwGTHlrt5wAAAABJRU5ErkJggg==">
  </ul>
  

  <!-- Tags (bookmark) -->
  
  <button id="article-functions-viewtags-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">bookmark</i>
    <span class="visuallyhidden">bookmark</span>
  </button>
  <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-viewtags-button">
    <li class="mdl-menu__item">
      <a class="post_tag-link" href="/tags/http/">http</a>
  </ul>
  

  <!-- Share -->
  <button id="article-fuctions-share-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">share</i>
    <span class="visuallyhidden">share</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-fuctions-share-button">
    

    

    <!-- Share Weibo -->
    

    <!-- Share Twitter -->
    

    <!-- Share Facebook -->
    

    <!-- Share Google+ -->
    

    <!-- Share LinkedIn -->
    

    <!-- Share QQ -->
    

    <!-- Share Telegram -->
    
</ul>

</div>
                

                <!-- Post Content -->
                <div id="post-content" class="mdl-color-text--grey-700 mdl-card__supporting-text fade out">
    
        <blockquote>
<p>书读了一遍发现没记住什么,团队过面试题时聊到401和403的区别,只是模糊有点印象但说不上来,就考虑做个读书笔记吧,加深下印象。<br>原书名《今晚我们一起学习http》相比《图解HTTP》更有日本特色。</p>
</blockquote>
<h3 id="一、TCP-IP协议"><a href="#一、TCP-IP协议" class="headerlink" title="一、TCP/IP协议"></a>一、TCP/IP协议</h3><p>分为应用层 / 传输层 / 网络层 / 链路层。</p>
<ul>
<li><p>应用层<br>决定了向用户提供应用服务时通信的活动,包含FTP/DNS服务及HTTP协议。</p>
</li>
<li><p>传输层<br>提供处于网络连接中计算机之间的数据传输,有TCP(传输控制协议)和UDP(用户数据报协议)。</p>
</li>
<li><p>网络层<br>处理网络上流动的数据包,该层规定了通过怎样的路径到达对方计算机,并把数据包传给对方。与对方计算机之间通过多台计算机或网络设备进行传输时,网络层的作用就是在众多的选项内选择一条传输路线。</p>
</li>
<li><p>链路层<br>用来处理连接网络的硬件部分。</p>
</li>
</ul>
<h5 id="通信过程"><a href="#通信过程" class="headerlink" title="通信过程"></a>通信过程</h5><ol>
<li>在应用层(HTTP协议)发出一个http请求</li>
<li>为了传输方便,在传输层(TCP协议)把从应用层收到的数据(HTTP请求报文)进行分割,并在各个报文打上标记序号及端口号转发给网络层</li>
<li>在网络层(IP协议)增加作为通信目的地的MAC地址后转发给链路层</li>
</ol>
<h5 id="IP-TCP-DNS"><a href="#IP-TCP-DNS" class="headerlink" title="IP / TCP / DNS"></a>IP / TCP / DNS</h5><ul>
<li>IP</li>
</ul>
<ol>
<li>IP协议的作用就是把各种数据包传送给对方</li>
<li>IP地址指明了节点被分配到的地址,MAC地址是指网卡所属的固定地址</li>
<li>ARP协议是一种用以解析地址的协议,根据通信放的IP地址可以反查出对应的MAC地址</li>
</ol>
<ul>
<li>TCP</li>
</ul>
<ol>
<li>提供字节流服务: 将大块数据分割成报文段为单位的数据包进行管理。</li>
<li>为准确将数据送达目标处,采用三次握手策略: 发送端先发送一个带SYN标志的数据包给对方。接收端收到后,回传一个带有SYN/ACK标志的数据包以示传达确认信息。最后发送端再回传一个带有ACK标志的数据包,代表握手结束。</li>
</ol>
<ul>
<li>DNS</li>
</ul>
<ol>
<li>和HTTP协议一样位于应用层的协议,提供域名到IP地址的解析服务,或逆向从IP地址反查域名</li>
</ol>
<h3 id="二、HTTP协议"><a href="#二、HTTP协议" class="headerlink" title="二、HTTP协议"></a>二、HTTP协议</h3><blockquote>
<p>HTTP是无状态协议,为了实现保持状态功能,引入Cookie技术</p>
</blockquote>
<h5 id="HTTP支持的方法"><a href="#HTTP支持的方法" class="headerlink" title="HTTP支持的方法"></a>HTTP支持的方法</h5><p>GET/POST/PUT/HEAD/DELETE/OPTIONS/TRACE/CONNECT</p>
<h5 id="持久连接"><a href="#持久连接" class="headerlink" title="持久连接"></a>持久连接</h5><p>只要任意一端没有明确提出断开连接,则保持TCP连接。<br>减少了TCP连接的重复建立和断开所造成的额外开销,减轻了服务器端的负载;减少开销的时间,使HTTP请求和响应更早结束,页面显示速度也提高了。</p>
<h5 id="管线化"><a href="#管线化" class="headerlink" title="管线化"></a>管线化</h5><p>可以并行发送多个请求</p>
<h3 id="三、HTTP报文内的HTTP信息"><a href="#三、HTTP报文内的HTTP信息" class="headerlink" title="三、HTTP报文内的HTTP信息"></a>三、HTTP报文内的HTTP信息</h3><h5 id="报文主体与实体主体"><a href="#报文主体与实体主体" class="headerlink" title="报文主体与实体主体"></a>报文主体与实体主体</h5><p>HTTP 在传输数据时可以按照数据原貌直接传输,但也可以在传输 过程中通过编码提升传输速率。<br>通常,报文主体等于实体主体。只有当传输中进行编码操作时,实体主体的内容发生变化,才导致它和报文主体产生差异。</p>
<h5 id="获取部分内容的范围请求"><a href="#获取部分内容的范围请求" class="headerlink" title="获取部分内容的范围请求"></a>获取部分内容的范围请求</h5><p>从之前下载中断处恢复下载的功能。使用首部字段: Range,如:<br><code>Range: bytes=5001-10000</code><br><code>Range: bytes=-3000, 5000-7000</code></p>
<p>针对范围请求,响应会返回状态码为 206 Partial Content 的响应报文。另外,对于多重范围的范围请求,响应会在首部字段 Content-Type 标明 multipart/byteranges 后返回响应报文。<br>如果服务器端无法响应范围请求,则会返回状态码 200 OK 和完整 的实体内容。</p>
<h3 id="四、HTTP状态码"><a href="#四、HTTP状态码" class="headerlink" title="四、HTTP状态码"></a>四、HTTP状态码</h3><table>
<thead>
<tr>
<th></th>
<th>类别</th>
<th>原因短语</th>
</tr>
</thead>
<tbody><tr>
<td>1XX</td>
<td>Informational(信息性状态码)</td>
<td>接收的请求正在处理</td>
</tr>
<tr>
<td>2XX</td>
<td>Success(成功状态码)</td>
<td>请求正常处理完毕</td>
</tr>
<tr>
<td>3XX</td>
<td>Redirection(重定向状态码)</td>
<td>需要进行附加操作以完成请求</td>
</tr>
<tr>
<td>4XX</td>
<td>Client Error(客户端错误状态码)</td>
<td>服务器无法处理请求</td>
</tr>
<tr>
<td>5XX</td>
<td>Server Error(服务器错误状态码)</td>
<td>服务器处理请求出错</td>
</tr>
</tbody></table>
<h5 id="常见状态码"><a href="#常见状态码" class="headerlink" title="常见状态码"></a>常见状态码</h5><table>
<thead>
<tr>
<th>状态码</th>
<th>code</th>
<th>介绍</th>
<th>场景</th>
</tr>
</thead>
<tbody><tr>
<td>204</td>
<td>No Content</td>
<td>已成功处理,但响应报文中不含实体的主体部分</td>
<td>一般在只需要从客户端往服务器发送信息,而对客户端不需要发送 056 新信息内容的情况下使用</td>
</tr>
<tr>
<td>206</td>
<td>Partial Content</td>
<td>成功执行范围请求</td>
<td></td>
</tr>
<tr>
<td>301</td>
<td>Moved Permanently</td>
<td>永久性重定向</td>
<td>如果已经把资源对应的 URI 保存为书签了,这时应该按 Location 首部字段提示的 URI 重新保存</td>
</tr>
<tr>
<td>302</td>
<td>Found</td>
<td>临时性重定向</td>
<td>该状态码表示请求的资源已被分配了新的 URI,希 望用户(本次)能使用新的URI访问(会转到响应报文首部的Location字段的地址)</td>
</tr>
<tr>
<td>304</td>
<td>Not Modified</td>
<td>该状态码表示客户端发送附带条件的请求时,服务器端允许请求访问资源,但请求未满足条件,不包含任何响应的主体部分</td>
<td></td>
</tr>
<tr>
<td>400</td>
<td>Bad Request</td>
<td>请求报文中存在语法错误</td>
<td></td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>发送的请求需要有通过 HTTP 认证的认证信息</td>
<td></td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>对请求资源的访问被服务器拒绝了</td>
<td>未获得文件系统的访问授权,访问权限出现某些问题(从未授权的 发送源 IP 地址试图访问)</td>
</tr>
<tr>
<td>404</td>
<td>Not Found</td>
<td>服务器上无法找到请求的资源或服务器端拒绝请求且不想说明理由时</td>
<td></td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error</td>
<td>服务器端在执行请求时发生了错误</td>
<td></td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable</td>
<td>服务器暂时处于超负载或正在进行停机维护,无法处理请求</td>
<td></td>
</tr>
</tbody></table>
<h3 id="五、与HTTP协作的web服务器"><a href="#五、与HTTP协作的web服务器" class="headerlink" title="五、与HTTP协作的web服务器"></a>五、与HTTP协作的web服务器</h3><h5 id="通信数据转发程序-代理、网关、隧道"><a href="#通信数据转发程序-代理、网关、隧道" class="headerlink" title="通信数据转发程序:代理、网关、隧道"></a>通信数据转发程序:代理、网关、隧道</h5><ul>
<li><p>代理</p>
<ul>
<li>一种有转发功能的应用程序</li>
<li>可级联多台代理服务器, 每经过一台需要附加Via首部字段以标记出经过的主机信息</li>
<li>优点: 利用缓存技术减少网络带宽的流量,组织内部针对特定网站的访问控制,以获取访问日志为主要目的</li>
</ul>
</li>
<li><p>网关</p>
<ul>
<li>是转发其他服务器通信数据的服务器,接收从客户端发送来的 请求时,它就像自己拥有资源的源服务器一样对请求进行处理。有 时客户端可能都不会察觉,自己的通信目标是一个网关</li>
<li>利用网关能提高通信的安全性,因为可以在客户端与网关之间的通信线路上加密以确保连接的安全</li>
</ul>
</li>
<li><p>隧道</p>
<ul>
<li>是在相隔甚远的客户端和服务器两者之间进行中转,并保持双方通信连接的应用程序</li>
<li>目的是确保客户端能与服务器进行安全的通信</li>
</ul>
</li>
</ul>
<h3 id="六、HTTP首部"><a href="#六、HTTP首部" class="headerlink" title="六、HTTP首部"></a>六、HTTP首部</h3><h5 id="HTTP请求报文"><a href="#HTTP请求报文" class="headerlink" title="HTTP请求报文"></a>HTTP请求报文</h5><blockquote>
<p>由方法、URI、HTTP版本、HTTP首部字段等部分构成</p>
</blockquote>
<h5 id="HTTP响应报文"><a href="#HTTP响应报文" class="headerlink" title="HTTP响应报文"></a>HTTP响应报文</h5><blockquote>
<p>由 HTTP 版本、状态码、HTTP首部字段3部分构成</p>
</blockquote>
<h5 id="HTTP首部字段"><a href="#HTTP首部字段" class="headerlink" title="HTTP首部字段"></a>HTTP首部字段</h5><p>分为以下4种类型(常用举例):</p>
<table><tr><td>类型</td><td>首部字段名</td><td>说明</td></tr><tr><td rowspan="3">通用首部字段</td><td>Cache-Control</td><td>控制缓存的行为</td></tr><tr><td>Connection</td><td>逐跳首部、连接的管理</td></tr><tr><td>Pragma</td><td>报文指令</td></tr><tr><td rowspan="6">请求首部字段</td><td>Accept</td><td>用户代理可处理的媒体类型</td></tr><tr><td>Accept-Charset</td><td>优先的字符集</td></tr><tr><td>Accept-Encoding</td><td>优先的内容编码</td></tr><tr><td>Authorization</td><td>Web认证信息</td></tr><tr><td>Authorization</td><td>Web认证信息</td></tr><tr><td>Referer</td><td>对请求中URI的原始获取方</td></tr><tr><td rowspan="3">响应首部字段</td><td>Accept-Ranges</td><td>是否接受字节范围请求</td></tr><tr><td>Location</td><td>令客户端重定向至指定URI</td></tr><tr><td>Age</td><td>推算资源创建经过时间</td></tr><tr><td rowspan="3">实体首部字段</td><td>Allow</td><td>资源可支持的 HTTP 方法</td></tr><tr><td>Content-Encoding</td><td>实体主体适用的编码方式</td></tr><tr><td>Content-Length</td><td>实体主体的大小(单位:字节)</td></tr></table>

<h5 id="HTTP-1-1-通用首部字段"><a href="#HTTP-1-1-通用首部字段" class="headerlink" title="HTTP/1.1 通用首部字段"></a>HTTP/1.1 通用首部字段</h5><ul>
<li>Cache-Control</li>
</ul>
<table>
<thead>
<tr>
<th>指令</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>public</td>
<td>其他用户也可利用缓存</td>
</tr>
<tr>
<td>private</td>
<td>响应只以特定的用户作为对象</td>
</tr>
<tr>
<td>no-cache</td>
<td>不缓存过期的资源</td>
</tr>
<tr>
<td>no-store</td>
<td>真·不进行缓存</td>
</tr>
<tr>
<td>must-revalidate</td>
<td>代理会向源服务器再次证即将返回的响应缓存目前是否仍然有效</td>
</tr>
</tbody></table>
<blockquote>
<p>同时存在max-age和Expires时,HTTP/1.1会优先处理max-age,忽略Expries,HTTP/1.0相反</p>
</blockquote>
<ul>
<li>Connection</li>
</ul>
<ul>
<li><p>控制不再转发给代理<br>Connection: 不再转发的首部字段<br>如: Connection: Upgrade, 代理服务器就会把首部字段中的Upgrade删掉</p>
</li>
<li><p>管理持久连接<br>Connection: close<br>HTTP/1.1默认连接都是持久连接,当服务器端想明确断开连接可设置close<br>HTTP/1.1之前都是非持久连接,若想维持持续连接,可设置Keep-Alive</p>
</li>
</ul>
<ul>
<li><p>Date<br>  创建 HTTP 报文的日期和时间</p>
</li>
<li><p>Pragma<br>  Pragma 是 HTTP/1.1 之前版本的历史遗留字段,仅作为与 HTTP/1.0 的向后兼容而定义<br>  所以发送请求会同时含有以下两个首部字段: </p>
<pre><code>  Cache-Control: no-cache
  Pragma: no-cache</code></pre></li>
<li><p>Trailer<br>  会事先说明在报文主体后记录了哪些首部字段。该首部字段可应用在 HTTP/1.1 版本分块传输编码时</p>
</li>
<li><p>Transfer-Encoding<br>  规定了传输报文主体时采用的编码方式。<br>HTTP/1.1 的传输编码方式仅对分块传输编码有效</p>
</li>
<li><p>Upgrade<br>  检测是否可使用更高的版本进行通信,可以是完全不同的通信协议</p>
</li>
<li><p>Via<br>  Via 是为了追踪客户端与服务器之间的请求和响应报文的传输路径<br>  报文经过代理或网关时,会先在首部字段 Via附中该加该服务器的信息,然后再进行转发</p>
</li>
</ul>
<h5 id="请求首部字段"><a href="#请求首部字段" class="headerlink" title="请求首部字段"></a>请求首部字段</h5><ul>
<li><p>Accept</p>
<p>通知服务器用户代理能够处理的媒体类型及优先级, type/subtype是一次指定多种媒体类型<br>文本文件: text/html, text/plain, text/css<br>图片文件: image/jpeg, image/gif<br>视频文件: video/mpeg</p>
<p>使用q=来表示权重值,q的范围是0~1,服务器会首先返回权重值高的媒体类型</p>
</li>
<li><p>Accept-Charset<br>支持的字符集及字符集的优先顺序,同样用q表示优先级<br>Accept-Charset: iso-8859-5, unicode-1-1;q=0.8</p>
</li>
<li><p>Accept-Encoding<br>支持的内容编码及优先级顺序,使用星号*作为通配符,为任意编码格式,同样用q表示优先级<br>如gzip</p>
</li>
<li><p>Authorization<br>用来告知服务器,用户代理的认证信息。通常想要通过服务器认证的用户代理会在接收到返回的401状态码后,把首部字段Authorization加入请求中。</p>
</li>
<li><p>From<br>告知服务器使用用户代理的用户的电子邮件地址。<br>目的是为了显示搜索引擎等用户代理的负责人的电子邮件联系方式。(因代理不同,可能在User-Agent首部字段内)</p>
</li>
<li><p>If-xxx<br>形如If-xxx的请求首部字段,都是条件请求,服务器接收到附带条件的请求后,只有判断条件为真时才会执行请求</p>
<ul>
<li><p>If-match会告知服务器匹配资源所用的实体标记(ETag)值,若匹配不到返回412Precondition Failed的响应</p>
</li>
<li><p>If-Modified-Since用于确认代理或客户端拥有的本地资源的有效性,若没有更新过,返回304Not Modified 的响应</p>
</li>
<li><p>If-Range若是ETag值或更新的日期时间匹配一致就作为范围请求处理;若不一致,则忽略范围请求,返回全部资源<br>如果不用If-Range,仅用Range范围请求,若没有资源,服务器会返回412Precondition Failed,目的是催促客户端再次发生请求,与If-Range相比就花费了两倍的功夫。</p>
</li>
</ul>
</li>
<li><p>Max-Forwards<br>指定可经过服务器的最大数目,在往下一个服务转发请求之前会将字段值减1后重新赋值。可以避免经过多台服务器转发请求失败,客户端得不到响应的问题;以及当字段值为-时,服务器会立即返回响应,对这条服务器为终点的传输路径的通信状况有所把握</p>
</li>
<li><p>Range<br>只需获取部分资源的范围请求,服务器后处理请求后返回206Partial Content 的响应,若无法处理,则返回200 OK及全部资源</p>
</li>
<li><p>Referer<br>告知服务器请求的原始资源的URI,服务器能知道从哪个web页面发起的。</p>
<blockquote>
<p>Referer的正确拼写应该是Referrer,一人提出时拼写错误写入了HTTP/1.0协议,后来发现已经大量使用了,就将错就错一直保留了。<a href="https://imququ.com/post/referrer-or-referer.html" target="_blank" rel="noopener">详情可见</a></p>
</blockquote>
</li>
</ul>
<h5 id="响应首部字段"><a href="#响应首部字段" class="headerlink" title="响应首部字段"></a>响应首部字段</h5><ul>
<li><p>Accept-Ranges 是用来告知客户端服务器是否能处理范围请求,可处理时为bytes,反之为none</p>
</li>
<li><p>Age 告知客户端源服务器在多久前创建了响应,单位为秒</p>
</li>
<li><p>ETag 是一种将资源以字符串形式做唯一标识的方式。</p>
<ul>
<li>强ETag值,不论实体发生多么细微的变化都会改变其值</li>
<li>弱ETag值,只用于提示资源是否相同,只有发送根本改变才会改变ETag值,这时在开头加W/,如: <code>ETag: W/&quot;usagi-1234&quot;</code></li>
</ul>
</li>
<li><p>Location 可以将响应接收方引导至某个与请求 URI 位置不同的资源, 一般配合3xx的响应,提供重定向的URI</p>
</li>
<li><p>Proxy-Authenticate 会把由代理服务器所要求的认证信息发送给客户端</p>
</li>
<li><p>Retry-After  告知客户端应该在多久之后再次发送请求,值可以是具体的日期时间或创建响应后的秒数</p>
</li>
<li><p>Server  告知客户端当前服务器上安装的 HTTP 服务器应用程序的信息</p>
</li>
<li><p>Vary  可对缓存进行控制, 仅对请求中含有相同Vary指定首部字段的请求返回缓存</p>
</li>
<li><p>WWW-Authenticate 用于HTTP访问认证,它会告知客户端适用于 问请求 URI 所指定资源的认证方案(Basic 或是 Digest)和   数提示的质询(challenge)。</p>
</li>
</ul>
<h5 id="实体首部字段"><a href="#实体首部字段" class="headerlink" title="实体首部字段"></a>实体首部字段</h5><ul>
<li>Content-Location 表示的是报文主体返回资源对应的 URI</li>
<li>Content-MD5 是一串由 MD5算法生成的值,其目的在于检查报文主体在传输过程中是否保持完整,以及确认传输到达。</li>
<li>Expires 资源失效的日期</li>
<li>Last-Modified 资源最终修改的时间</li>
</ul>
<h5 id="其他首部字段"><a href="#其他首部字段" class="headerlink" title="其他首部字段"></a>其他首部字段</h5><ul>
<li><p>X-Frame-Options<br>属于 HTTP 响应首部,用于控制网站内容在其他 Web 网站的 Frame 标签内的显示问题。其主要目的是为了防止点击劫持(click acking)攻击</p>
<ul>
<li>DENY: 拒绝</li>
<li>SAMEORIGIN:仅同源域名下的页面匹配时许可</li>
</ul>
</li>
<li><p>X-XSS-Protection<br> 属于 HTTP 响应首部,它是针对跨站脚本攻击(XSS)的一种对策,用于控制浏览器XSS防护机制的开关</p>
<ul>
<li>0: 将XSS过滤设置成无效状态</li>
<li>1: 将XSS过滤设置成有效状态</li>
</ul>
</li>
<li><p>DNT<br>属于HTTP请求首部,Do Not Track,意为拒绝个人信息被收集,是表示拒绝被精准广告追踪的一种方法</p>
<ul>
<li>0: 同意被追踪</li>
<li>1: 拒绝被追踪</li>
</ul>
</li>
</ul>
<h3 id="七、确保Web安全的HTTPS"><a href="#七、确保Web安全的HTTPS" class="headerlink" title="七、确保Web安全的HTTPS"></a>七、确保Web安全的HTTPS</h3><blockquote>
<p>HTTP加上加密处理和认证以及完整性保护后即是HTTPS</p>
<ul>
<li>HTTP的缺点</li>
<li>通信使用明文(不加密) 内容可能会被窃听</li>
<li>不验证通信方的身份,因此有可能遭遇伪装</li>
<li>无法证明报文的完整性,所以有可能已遭篡改</li>
</ul>
</blockquote>
<p>HTTPS并非新协议,只是HTTP通信接口部分用SSL和TLS协议代替了。</p>
<ul>
<li>相互交换密钥的公开密钥加密技术</li>
</ul>
<p>公开密钥加密使用一对非对称的密钥,一把是私有密钥,一把是公开密钥。<br>发送密文的一方使用对方的公开密钥进行加密,对方收到加密的信息后,使用自己的私有密钥进行解密。使用这种方式,不需要发送用来解密的私有密钥,也不必担心密钥被攻击者窃听而盗走。</p>
<ul>
<li>HTTPS采用混合加密机制<br>公开密钥加密与共享密钥加密相比,处理速度要慢;<br>具体表现为:<ul>
<li>和HTTP相比网络负载可能会慢2到100倍,除去和TCP连接、发送HTTP请求,还必须进行SSL通信,因此整体上处理通信量会增加</li>
<li>服务器和客户端都需要进行加密和解密的运算处理,会更多地消耗服务器和客户端的硬件资源,导致负载增强<blockquote>
<p>没有根本性的解决方案,可以使用SSL加速器(专用服务器)硬件来改善该问题<br>在交换密钥环境使用公开密钥加密方式,之后的建立通信交换报文阶段使用共享密钥加密方式</p>
</blockquote>
</li>
</ul>
</li>
</ul>
<h5 id="HTTPS的安全通信机制"><a href="#HTTPS的安全通信机制" class="headerlink" title="HTTPS的安全通信机制"></a>HTTPS的安全通信机制</h5><ol>
<li>客户端通过发送Client Hello报文开始SSL通信。报文中包含客户端支持的 SSL 的指定版本、加密组件(Cipher Suite)列表(所使用的加密算法及密钥长度等)</li>
<li>服务器可进行SSL通信时,会以Server Hello报文作为应答。</li>
<li>之后服务器发送Certificate报文。报文中包含公开密钥证书。</li>
<li>最后服务器发送Server Hello Done报文通知客户端,最初阶段的 SSL 握手协商部分结束。</li>
<li>SSL 第一次握手结束之后,客户端以Client Key Exchange 报文作为回应。报文中包含通信加密中使用的一种被称为 Pre-master secret的随机密码串。该报文已用步骤3中的公开密钥进行加密。</li>
<li>接着客户端继续发送Change Cipher Spec报文。该报文会提示服务器,在此报文之后的通信会采用 Pre-master secret 密钥加密。</li>
<li>客户端发送 Finished 报文。该报文包含连接至今全部报文的整体校验值。这次握手协商是否能够成功,要以服务器是否能够正确解密该报文作为判定标准。</li>
<li>服务器同样发送 Change Cipher Spec 报文。</li>
<li>服务器同样发送Finished报文。</li>
<li>服务器和客户端的 Finished 报文交换完毕之后,SSL连接就 建立完成。当然,通信会受到 SSL 的保护。从此处开始进行应用层协议的通信,即发送 HTTP 请求</li>
<li>应用层协议通信,即发送 HTTP 响应。</li>
<li>最后由客户端断开连接。断开连接时,发送 close notify报文</li>
</ol>
<blockquote>
<p>在以上流程中,应用层发送数据时会附加一种叫做 MAC(Message Authentication Code)的报文摘要。MAC 能够查知报文是否遭到 改, 从而保护报文的完整 。</p>
</blockquote>
<h3 id="八、确认访问用户身份的认证"><a href="#八、确认访问用户身份的认证" class="headerlink" title="八、确认访问用户身份的认证"></a>八、确认访问用户身份的认证</h3><ul>
<li><p>BASIC认证</p>
<ol>
<li>当请求的资源需要BASIC认证,服务器会响应401</li>
<li>客户端将用户id及密码Base64编码后发给服务器(无加密)</li>
<li>通过认证,服务器返回包含资源的响应<blockquote>
<p>既无加密,也无法实现认证注销的操作</p>
</blockquote>
</li>
</ol>
</li>
<li><p>DIGEST认证</p>
<ol>
<li>类似BASIC认证,响应401,包含临时质询码(随机数,noce)</li>
<li>返回经过MD5运算后的密码字符串等</li>
<li>通过认证返回包含资源的响应,并在首部字段 Authentication-Info 写入一些认证成功的相关信息<blockquote>
<p>虽然提供防止密码被窃听的保护机制,但并不存在防止用户伪装的保护机制。</p>
</blockquote>
</li>
</ol>
</li>
<li><p>SSL客户端认证</p>
<ul>
<li><p>认证步骤</p>
<ol>
<li>接收到请求,服务器会发生Certificate Request 报文,要求客户端提供客户端证书</li>
<li>客户端会把客户端证书信息以 Client Certificate 报文方式发送给服务器</li>
<li>服务器验证客户端证书验证通过后方可领取证书内客户端的 开密钥,然后开始 HTTPS 加密通信</li>
</ol>
</li>
<li><p>双因素认证<br>一般和基于表单认证组合形成双因素认证来使用,第一个SSL客户端证书用来认证客户端计算机,另一个认证因素的密码则用来确定是用户本人</p>
</li>
</ul>
</li>
<li><p>基于表单认证</p>
</li>
</ul>
<h3 id="九、基于HTTP的功能追加协议"><a href="#九、基于HTTP的功能追加协议" class="headerlink" title="九、基于HTTP的功能追加协议"></a>九、基于HTTP的功能追加协议</h3><ul>
<li><p>HTTP存在的问题</p>
<ul>
<li>一条连接上只可发送一个请求</li>
<li>请求只能从客户端开始</li>
<li>请求/响应首部未经压缩就发送,首部嘻嘻越多延迟越大</li>
<li>每次互相发送相同的/冗长的首部造成浪费</li>
<li>可任意选择数据压缩格式,非强制压缩</li>
</ul>
</li>
<li><p>Ajax的解决方法<br>只更新一部分页面,响应中传输的数据量也因此减少。但有可能导致大量请求产生。</p>
</li>
<li><p>Comet的解决方法<br>一旦服务器有内容更新了,Comet会直接给客户端返回响应。但为了保留响应,一次连接的持续时间也变长了,为了维持连接也会消耗更多的资源。</p>
</li>
<li><p>SPDY的解决方法(已被HTTP/2替代)<br>SPDY以会话层的形式加入,控制对数据的流动,但还是采用HTTP建立通信连接。<br>使用SPDY后,HTTP协议额外获得以下功能:</p>
<ul>
<li>多路复用流:<br>通过单一的TCP连接,可以无限制处理多个HTTP请求。所有请求的处理都在一条TCP连接上,因此TCP的处理效率得到提高。</li>
<li>赋予请求优先级</li>
<li>压缩HTTP首部</li>
<li>推送功能</li>
<li>服务器提示功能</li>
</ul>
</li>
</ul>
<h5 id="全双工通信的WebSocket"><a href="#全双工通信的WebSocket" class="headerlink" title="全双工通信的WebSocket"></a>全双工通信的WebSocket</h5><p>主要是解决Ajax和Comet里XMLHTTPRequest附带的缺陷所引起的问题;<br>建立在HTTP基础上的协议,连接的发起方仍是客户端,而一旦确立WebSocket通信连接,不论服务器还是客户端,任意一方都可以直接向对方发送报文。</p>
<ul>
<li><p>推送功能<br>支持由服务器向客户端推送数据的推送功能</p>
</li>
<li><p>减少通信量<br>只要建立起WebSocket连接,就希望一直保持连接状态,而且Websocket首部信息很小,通信量也减少了</p>
</li>
</ul>
<blockquote>
<p>为了实现WebSocket通信,在HTTP连接建立后需要完成一次握手的步骤</p>
</blockquote>
<ul>
<li><p>握手请求<br>设置Upgrade为webSocket,Sec-WebSocket-Key字段内记录着握手过程中必不可少的键值,Sec-WebSocket-Protocol 字段内记录使用的子协议</p>
</li>
<li><p>握手响应<br>返回状态码 101 Switching Protocols</p>
</li>
</ul>
<p>成功握手确立 WebSocket连接之后,通信时不再使用 HTTP 的数据帧,而 采用 WebSocket 独立的数据帧</p>
<ul>
<li><p>WebSocket API<br>每 50ms 发送一次数据的实例:</p>
<pre class=" language-javascript"><code class="language-javascript"> <span class="token keyword">var</span> socket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WebSocket</span><span class="token punctuation">(</span><span class="token string">'ws://game.example.com:12010/updates'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> socket<span class="token punctuation">.</span>onopen <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>socket<span class="token punctuation">.</span>bufferedAmount <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
      socket<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token function">getUpdateData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
</li>
<li><p>HTTP/2<br>目标是改善用户在使用Web时的速度体验,基于SPDY</p>
<ul>
<li>帧、消息、流和TCP连接<br>将一个TCP连接分为若干个流（Stream），每个流中可以传输若干消息（Message），每个消息由若干最小的二进制帧（Frame）组成</li>
<li>HPACK 算法<br>用于对HTTP头部做压缩</li>
<li>服务器推送<br>服务端向客户端发送比客户端请求更多的数据。这允许服务器直接提供浏览器渲染页面所需资源，而无须浏览器在收到、解析页面后再提起一轮请求，节约了加载时间</li>
</ul>
</li>
</ul>

    

    
</div>


                

                <!-- Post Comments -->
                
                    




    <!-- 使用 DISQUS -->
    <div id="disqus-comment">
        <div id="disqus_thread"></div>
<script>
    var disqus_config = function () {
        this.page.url = 'https://jiandandkl.github.io/2018/09/30/《图解HTTP》读书笔记/';  // Replace PAGE_URL with your page's canonical URL variable
        this.page.identifier = 'https://jiandandkl.github.io/2018/09/30/《图解HTTP》读书笔记/'; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
    queue.offer(function() {
            (function() { // DON'T EDIT BELOW THIS LINE
                var d = document;
                var s = d.createElement('script');
                s.src = '//jiandandkl.disqus.com/embed.js';
                s.setAttribute('data-timestamp', + new Date());
                (d.head || d.body).appendChild(s);
            })();
        });
</script>

    </div>
    <style>
        #disqus-comment{
            background-color: #eee;
            padding: 2pc;
        }
    </style>




                
            </div>

            <!-- Post Prev & Next Nav -->
            <nav class="material-nav mdl-color-text--grey-50 mdl-cell mdl-cell--12-col">
    <!-- Prev Nav -->
    
        <a href="/2019/01/04/sequelize-typescript联表查询/" id="post_nav-newer" class="prev-content">
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_back</i>
            </button>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            新篇
        </a>
    

    <!-- Section Spacer -->
    <div class="section-spacer"></div>

    <!-- Next Nav -->
    
        <a href="/2018/09/17/redis中sscan的使用-md/" id="post_nav-older" class="next-content">
            旧篇
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_forward</i>
            </button>
        </a>
    
</nav>

        </div>
    </div>



                    
                        <!-- Overlay For Active Sidebar -->
<div class="sidebar-overlay"></div>

<!-- Material sidebar -->
<aside id="sidebar" class="sidebar sidebar-colored sidebar-fixed-left" role="navigation">
    <div id="sidebar-main">
        <!-- Sidebar Header -->
        <div class="sidebar-header header-cover" style="background-image: url(/img/sidebar_header.png);">
  <!-- Top bar -->
  <div class="top-bar"></div>

  <!-- Sidebar toggle button -->
  <button type="button" class="sidebar-toggle mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" style="display: initial;"
    data-upgraded=",MaterialButton,MaterialRipple">
    <i class="material-icons">clear_all</i>
    <span class="mdl-button__ripple-container">
      <span class="mdl-ripple"></span>
    </span>
  </button>

  <!-- Sidebar Avatar -->
  <div class="sidebar-image">
    <img src="/img/avatar.png" alt="jiandandkl's avatar">
  </div>

  <!-- Sidebar Email -->
  <a data-toggle="dropdown" class="sidebar-brand" href="#settings-dropdown">
    dujunnr@hotmail.com
    <b class="caret"></b>
  </a>
</div>

        <!-- Sidebar Navigation  -->
        <ul class="nav sidebar-nav">
    <!-- User dropdown  -->
    <li class="dropdown">
        <ul id="settings-dropdown" class="dropdown-menu">
            
                <li>
                    <a href="mailto:dujunnr@hotmail.com" target="_blank" title="Email Me">
                        
                            <i class="material-icons sidebar-material-icons sidebar-indent-left1pc-element">email</i>
                        
                        Email Me
                    </a>
                </li>
            
                <li>
                    <a href="https://github.com/jiandandkl" target="_blank" title="GitHub">
                        
                            <i class="material-icons sidebar-material-icons sidebar-indent-left1pc-element">home</i>
                        
                        GitHub
                    </a>
                </li>
            
        </ul>
    </li>

    <!-- Homepage -->
    
        <li id="sidebar-first-li">
            <a href="/" target="_self">
                
                    <i class="material-icons sidebar-material-icons">home</i>
                
                主页
            </a>
        </li>
        
    

    <!-- Archives  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">inbox</i>
                
                    归档
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
            <li>
                <a class="sidebar_archives-link" href="/archives/2025/07/">七月 2025<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2023/12/">十二月 2023<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2023/04/">四月 2023<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2023/02/">二月 2023<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2022/05/">五月 2022<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2021/10/">十月 2021<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2021/05/">五月 2021<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2020/12/">十二月 2020<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2020/01/">一月 2020<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2019/08/">八月 2019<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2019/06/">六月 2019<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2019/03/">三月 2019<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2019/01/">一月 2019<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/09/">九月 2018<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/06/">六月 2018<span class="sidebar_archives-count">3</span></a>
            </ul>
        </li>
        
    

    <!-- Categories  -->
    

    <!-- Pages  -->
    

    <!-- Article Number  -->
    
</ul>


        <!-- Sidebar Footer -->
        <!--
I'm glad you use this theme, the development is no so easy, I hope you can keep the copyright, I will thank you so much.
If you still want to delete the copyrights, could you still retain the first one? Which namely "Theme Material"
It will not impact the appearance and can give developers a lot of support :)

很高兴您使用并喜欢该主题，开发不易 十分谢谢与希望您可以保留一下版权声明。
如果您仍然想删除的话 能否只保留第一项呢？即 "Theme Material"
它不会影响美观并可以给开发者很大的支持和动力。 :)
-->

<!-- Sidebar Divider -->

    <div class="sidebar-divider"></div>


<!-- Theme Material -->

    <a href="https://github.com/viosey/hexo-theme-material"  class="sidebar-footer-text-a" target="_blank">
        <div class="sidebar-text mdl-button mdl-js-button mdl-js-ripple-effect sidebar-footer-text-div" data-upgraded=",MaterialButton,MaterialRipple">
            主题 - Material
            <span class="sidebar-badge badge-circle">i</span>
        </div>
    </a>


<!-- Help & Support -->
<!--

-->

<!-- Feedback -->
<!--

-->

<!-- About Theme -->
<!--

-->

    </div>

    <!-- Sidebar Image -->
    

</aside>

                    

                    
                        <!-- Footer Top Button -->
                        <div class="toTop-wrap">
    <a href="#top" class="toTop">
        <i class="material-icons footer_top-i">expand_less</i>
    </a>
</div>

                    

                    <!--Footer-->
<footer class="mdl-mini-footer" id="bottom">
  
  <!-- Paradox Footer Left Section -->
  <div class="mdl-mini-footer--left-section sns-list">
    <!-- Twitter -->
    

    <!-- Facebook -->
    

    <!-- Google + -->
    

    <!-- Weibo -->
    
        <a href="https://weibo.com/u/1676955787" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn" style="background-image: url(/img/footer/footer_ico-weibo.svg);">
                <span class="visuallyhidden">Weibo</span>
            </button><!--
     --></a>
    

    <!-- Instagram -->
    

    <!-- Tumblr -->
    

    <!-- Github -->
    
        <a href="https://github.com/jiandandkl" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn" style="background-image: url(/img/footer/footer_ico-github.svg);">
                <span class="visuallyhidden">Github</span>
            </button><!--
     --></a>
    

    <!-- LinkedIn -->
    

    <!-- Zhihu -->
    

    <!-- Bilibili -->
    

    <!-- Telegram -->
    
</div>


  <!--Copyright-->
  <div id="copyright">
    Copyright&nbsp;©&nbsp;
    <script type="text/javascript">
      var fd = new Date();
      document.write(fd.getFullYear());
    </script>
    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js">
    </script>
    &nbsp;
    dujun blog
  </div>

  <!-- Paradox Footer Right Section -->

  <!--
        I am glad you use this theme, the development is no so easy, I hope you can keep the copyright.
        It will not impact the appearance and can give developers a lot of support :)

        很高兴您使用该主题，开发不易，希望您可以保留一下版权声明。
        它不会影响美观并可以给开发者很大的支持。 :)
        -->

  <div class="mdl-mini-footer--right-section">
    <div>
      <div class="footer-develop-div">Powered by <a href="https://hexo.io" target="_blank" class="footer-develop-a">Hexo</a></div>
      <div class="footer-develop-div">Theme - <a href="https://github.com/viosey/hexo-theme-material" target="_blank"
          class="footer-develop-a">Material</a></div>
    </div>
  </div>
  
</footer>

                    <!-- Import File -->

    <script src="/js/lazyload.min.js"></script>
    <script src="/js/js.min.js"></script>



    <script src="/js/nprogress.js"></script>


<script type="text/javascript">
    NProgress.configure({
        showSpinner: true
    });
    NProgress.start();
    $('#nprogress .bar').css({
        'background': '#29d'
    });
    $('#nprogress .peg').css({
        'box-shadow': '0 0 10px #29d, 0 0 15px #29d'
    });
    $('#nprogress .spinner-icon').css({
        'border-top-color': '#29d',
        'border-left-color': '#29d'
    });
    setTimeout(function() {
        NProgress.done();
        $('.fade').removeClass('out');
    }, 800);
</script>












    <!-- 使用 DISQUS js 代码 -->
    <script id="dsq-count-scr" src="//jiandandkl.disqus.com/count.js" async></script>





<!-- Window Load-->
<script>
    $(window).load(function() {
        // Post_Toc parent position fixed
        $('.post-toc-wrap').parent('.mdl-menu__container').css('position', 'fixed');
    });
</script>

<!-- MathJax Load-->

<script>
    <!-- Offer LazyLoad -->
    queue.offer(function(){
        $('.lazy').lazyload({
            effect : 'show'
        });
    });

    <!-- Start Queue -->
    $(document).ready(function(){
        setTimeout(function(){
            setInterval(function(){
                queue.execNext();
            },200);
        },3000);
    });
</script>

                </main>
            </div>
        </body>
    
</html>
